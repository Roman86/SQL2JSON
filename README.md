#SQL2JSON for PHP
Allows you to build JSON tree from SQL-query result (or any custom data array) on PHP

##Usage
```php
// GET DATA
// variant 1: from resource
//	(you can use static methods dataFromMySqlResource, dataFromIBaseResource or write your own)
$res = mysqli_query(...);
$data = TArrayDataSet::dataFromMySqlResource($res);
// variant 2 is to generate data array manually: array("fields" => array(...), "records"=>array(...))
// next step is CREATING OBJECT
$ds = new TArrayDataSet();
// SET DATA
$ds->setData($data);
// GET JSON ARRAY
$json = $ds->toJson("animals:class(class,classdescr)/members:name*(food,weight,size,anger)", false);

// You're done! Next steps are optional:
// debug it
print_r($json);
// and finally you can encode it and show
echo json_encode($json);
```

####_struct_ param format description
token | descr
------|------
_struct_ param | &lt;array&gt;
**array** | &lt;arrname&gt;:&lt;groupfield>[*]\(&lt;fields&gt;\)[/&lt;array&gt;]
**arrname** | string, name of json array
**groupfield**| string, keys of array will be generated by unique values of this field. Keys are numbers, but if there's asterisk after _groupfield_ - field values will be used as keys
**fields** | &lt;fieldname&gt;[,&lt;fieldname&gt;[,...]]
**fieldname** | string, to make field for json record

##Examples
```php
$data = array(
	"fields" => array("class", "classdescr", "name", "food", "weight", "size", "anger")
	,"records" => array(
		array("dinosaur", "Long time ago", "t-rex", "other dinosaurs", "wow-wow", "huge", "very angry")
		, array("dinosaur", "Long time ago (once more) - doesn't matter", "brachiosaurus", "trees", "heavy", "very high", "nope")
		, array("dinosaur", "Long long time ago... grouped fields are taken from first record", "compsognathus", "offal", "light", "small", "yes")
		, array("dog", "man's friend", "retriever", "everything", "mid-heavy", "medium", "nope")
		, array("dog", "man's friend", "chihuahua", "smaller dogs", "light", "tiny", "dangerous")
	)
);
	
$ds = new TArrayDataSet();
// SET DATA
$ds->setData($data);
// GET JSON ARRAY
$json = $ds->toJson("animals:class(class,classdescr)/members:name*(food,weight,size,anger)", false);
print_r($json);
```
will output
```
Array
(
    [animals] => Array
        (
            [0] => Array
                (
                    [class] => dinosaur
                    [classdescr] => Long time ago
                    [members] => Array
                        (
                            [t-rex] => Array
                                (
                                    [food] => other dinosaurs
                                    [weight] => wow-wow
                                    [size] => huge
                                    [anger] => very angry
                                )

                            [brachiosaurus] => Array
                                (
                                    [food] => trees
                                    [weight] => heavy
                                    [size] => very high
                                    [anger] => nope
                                )

                            [compsognathus] => Array
                                (
                                    [food] => offal
                                    [weight] => light
                                    [size] => small
                                    [anger] => yes
                                )

                        )

                )

            [1] => Array
                (
                    [class] => dog
                    [classdescr] => man's friend
                    [members] => Array
                        (
                            [retriever] => Array
                                (
                                    [food] => everything
                                    [weight] => mid-heavy
                                    [size] => medium
                                    [anger] => nope
                                )

                            [chihuahua] => Array
                                (
                                    [food] => smaller dogs
                                    [weight] => light
                                    [size] => tiny
                                    [anger] => dangerous
                                )

                        )

                )

        )

)
```
You can see how string keys are used for members collection.
####_skipRoot_ param
Top level array "animals" can be skipped by setting _skipRoot_ parameter to true. It will output:
```
Array
(
    [0] => Array
        (
            [class] => dinosaur
            ...
```
